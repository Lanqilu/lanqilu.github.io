"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var intX,mb=document.getElementById("springBanner"),imgs=document.querySelectorAll(".layer img");console.log(imgs);var o_imgs_styles=(imgs=_toConsumableArray(imgs)).map(function(t){t=window.getComputedStyle(t,null).getPropertyValue("transform");return"transform: ".concat(t)}),o_imgs_opacitys=imgs.map(function(t){window.getComputedStyle(t,null).getPropertyValue("opacity");return"opacity: ".concat(0)});function getTranslateVal(t){t.indexOf("translate")}mb.onmouseenter=function(t){t=t.x;intX=t},mb.onmousemove=function(t){var a=t.x;imgs.forEach(function(t,e){var r=t.dataset.moveMultiple,n=(intX-a)/Number(r),i=o_imgs_styles[e].split(","),r=Number(i[4]);i.splice(4,1,String(r+n));r=i.join(",");t.dataset.isOpacity&&(n=o_imgs_opacitys[e].split(":"),Number(n[1]),i=window.screen.width/2,e=Number(t.dataset.isOpacity)?intX-a:a-intX,n.splice(1,1,e/i),n=n.join(":"),r+="; ".concat(n)),t.setAttribute("style",r)})},mb.onmouseleave=function(){imgs.forEach(function(t,e){t.setAttribute("style",o_imgs_styles[e])})};var c=document.getElementById("canvas"),ctx=c.getContext("2d"),_w=c.width,_h=c.height,scales=[.03,.04,.05,.06,.07,.08],slen=scales.length-1,speedX=2,speedY=3,flower=function(){function t(){_classCallCheck(this,t),this.x=Math.random()*_w,this.y=0,this.speedX=0,this.speedY=0,this.scale=0,this.width=0,this.height=0,this.img=null}return _createClass(t,[{key:"init",value:function(){this.img=new Image;var t=5<10*Math.random()?1:0,e=Math.floor(Math.random()*slen);this.speedX=Math.random()*speedX,this.speedY=Math.random()*speedY,this.scale=scales[e],this.width=this.height=250*this.scale,this.img.src=t?"https://cdn.jsdelivr.net/gh/halo-blog/cdn-blog-img-a@main/BilibiliBannerSpring/flow1.png":"https://cdn.jsdelivr.net/gh/halo-blog/cdn-blog-img-a@main/BilibiliBannerSpring/flow2.png"}},{key:"draw",value:function(t){var e=this;this.img.onload=function(){t.drawImage(e.img,e.x,e.y,e.width,e.height)}}},{key:"move",value:function(t){this.x=this.x+this.speedX>=_w?Math.random()*_w:this.x+this.speedX,this.y=this.y>=_h?0:this.y+this.speedY,t.drawImage(this.img,this.x,this.y,this.width,this.height)}}]),t}(),flowers=[];function start(){for(var t=0;t<50;t++){var e=new flower;e.init(),e.draw(ctx),flowers.push(e)}}function move(){ctx.clearRect(0,0,_w,_h);for(var t=0;t<flowers.length;t++)flowers[t].move(ctx);window.requestAnimationFrame(move)}start(),move();